{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game - MapTag</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;," />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/game.css' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="{% static 'scripts/usermenu.js' %}"></script>
  </head>

  <body id="body">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAfIdLGhVXWF-JiBJuJle1Pp1YnHYutuC0&v=weekly" defer></script>
    <nav class="custom-navbar">
      <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
        <img src="{% static 'images/maptag_logo.png' %}" alt="Logo" width="80" height="80" class="d-inline-block align-text-top" />
      </a>
      <div class="navbar-content">
        <span id="countdown"><strong></strong></span>
        <span id="currentScore"><strong></strong></span>
        <span id="currentMap"><strong></strong></span>
      </div>

      <!-- User menu -->
      <div class="dropdown">
        <button onclick="myFunction()" class="dropbtn">{{ user.username }}</button>
        <div id="myDropdown" class="dropdown-content">
          <a href="{% url 'myfriends' %}">Friends</a>
          <a href="{% url 'mygames' %}">My games</a>
          <a href="{% url 'log_out' %}">Log out</a>
        </div>
      </div>
    </nav>

    <div id="id01" class="modal no-close">
      <div class="modal-content animate" id="modal1" action="/action_page.php" method="post">
        <h1 id="current-map-modal">Map overview</h1>
        <div class="container">
          <div id="locationInfo"></div>
          <div id="current-score-modal"></div>
          <div id="button-container">
            <input type="button" class="custom-button" id="back1" value="Back to Game Settings" data-url="{% url 'gameselection' %}" onclick="redirectToSettings()" />
            <input type="button" class="custom-button" id="playButton" value="Play again" onclick="playAgain()" />
        </div>
          <div class="loader" id="loader1" style="display:none;"></div>
        </div>
      </div>
    </div>

    <div id="id02" class="modal no-close">
      <div class="modal-content animate" id="modal1" action="/action_page.php" method="post">
        <h1 id="current-map-modal">MapTag</h1>
        <div class="container">
          Can you find the location on the map?
          <div id="button-container">
            <input type="button" class="custom-button" id="back2" value="Back to Game Settings" data-url="{% url 'gameselection' %}" onclick="redirectToSettings()"/>
            <input type="button" class="custom-button" id="startButton" value="Start Game" onclick="startGame()" />
        </div>
          <div class="loader" id="loader2" style="display:none;"></div>
        </div>
      </div>
    </div>

    <div id="pano"></div>
    <div id="floating-panel">
      <div id="map"></div>
    </div>
    <script src="{% static 'scripts/game.js' %}"></script>
  </body>
</html>
